# furyTerminalæ–‡æ¡£

ç›®å½•

---
1. [ç®€ä»‹](#ç®€ä»‹)
   1. [æ–‡æ¡£ç›®çš„](#æ–‡æ¡£ç›®çš„)
   2. [å‘èµ·æ—¶é—´](#å‘èµ·æ—¶é—´)
   3. [è§„åˆ’](#è§„åˆ’)
      1. [TODO](#TODO)
      2. [FIXME](#FIXME)
      3. [Milestone](#Milestone)
   4. [ç³»ç»Ÿç›®æ ‡](#ç³»ç»Ÿç›®æ ‡)
   5. [ç³»ç»Ÿç¯å¢ƒ](#ç³»ç»Ÿç¯å¢ƒ)
2. [CANè½¬SPIæ¨¡å—](#CANè½¬SPIæ¨¡å—)
3. [DSIæ¥å£çš„7å¯¸è§¦æ‘¸æ˜¾ç¤ºå±](#DSIæ¥å£çš„7å¯¸è§¦æ‘¸æ˜¾ç¤ºå±)
4. [æµ‹è¯•](#æµ‹è¯•)
5. [æ ‘è“æ´¾é…ç½®](#æ ‘è“æ´¾é…ç½®)
   1. [ç½‘ç»œé…ç½®](#ç½‘ç»œé…ç½®)
6. [è½¦è½½ç½‘ç«™ (äº¤äº’å¹³å°)](#è½¦è½½ç½‘ç«™-äº¤äº’å¹³å°)
   1. [æ–‡ä»¶æ ‘](#æ–‡ä»¶æ ‘)
   2. [ç«™ç‚¹åœ°å›¾](#ç«™ç‚¹åœ°å›¾)
   3. [æ•°æ®æµæ–¹æ¡ˆ](#æ•°æ®æµæ–¹æ¡ˆ)
   4. [å¦‚æ­¤é€‰æ‹©çš„ä¼˜ç¼ºç‚¹](#å¦‚æ­¤é€‰æ‹©çš„ä¼˜ç¼ºç‚¹)
      1. [Django](#Django)
         1. [ä¼˜ç‚¹](#ä¼˜ç‚¹)
         2. [ç¼ºç‚¹](#ç¼ºç‚¹)
      2. [SQLite3](#SQLite3)
         1. [ä¼˜ç‚¹](#ä¼˜ç‚¹-1)
         2. [ç¼ºç‚¹](#ç¼ºç‚¹-1)
      3. [MySQL](#MySQL)
         1. [ä¼˜ç‚¹](#ä¼˜ç‚¹-2)
         2. [ç¼ºç‚¹](#ç¼ºç‚¹-2)
         3. [MySQLå‘½ä»¤ç®€è®°](#MySQLå‘½ä»¤ç®€è®°)
   5. [ç®¡ç†](#ç®¡ç†)
   6. [oncar](#oncar)
      1. [oncarè®¾è®¡](#oncarè®¾è®¡)
   7. [djangoçºªè¦](#djangoçºªè¦)
      1. [è®¾ç½®å…è®¸è®¿é—®çš„åœ°å€](#è®¾ç½®å…è®¸è®¿é—®çš„åœ°å€)
      2. [è®¾ç½®åå°æ—¶é—´æ˜¾ç¤ºæ ¼å¼](#è®¾ç½®åå°æ—¶é—´æ˜¾ç¤ºæ ¼å¼)
      3. [è®¾ç½®å­—æ®µä¸å¯ä¿®æ”¹](#è®¾ç½®å­—æ®µä¸å¯ä¿®æ”¹)
      4. [æ¨¡æ¿](#æ¨¡æ¿)
      5. [å¸¸ç”¨å‘½ä»¤](#å¸¸ç”¨å‘½ä»¤)
         1. [è¿è¡Œç½‘ç«™](#è¿è¡Œç½‘ç«™)
         2. [ç”Ÿæˆåº”ç”¨çš„è¿ç§»](#ç”Ÿæˆåº”ç”¨çš„è¿ç§»)
         3. [åº”ç”¨è¿ç§»åˆ°ç½‘ç«™](#åº”ç”¨è¿ç§»åˆ°ç½‘ç«™)
         4. [database API](#database-API)
            1. [è¿›å…¥ä¸“ç”¨pythonè§£é‡Šå™¨](#è¿›å…¥ä¸“ç”¨pythonè§£é‡Šå™¨)
            2. [æ·»åŠ è®°å½•](#æ·»åŠ è®°å½•)
      6. [æ³¨æ„äº‹é¡¹](#æ³¨æ„äº‹é¡¹)
   8. [é¡µé¢è®¾è®¡çºªè¦](#é¡µé¢è®¾è®¡çºªè¦)
      1. [ä»ªè¡¨ç›˜](#ä»ªè¡¨ç›˜)
---

## ç®€ä»‹

### æ–‡æ¡£ç›®çš„

æœ¬æ–‡æ¡£æ˜¯furyTerminalç³»ç»Ÿæ€»ä½“å’Œå„éƒ¨åˆ†è¯´æ˜, ä¸»è¦é¢å‘ç”µæ°”ç»„å¼€å‘äººå‘˜, å…¶ä»–ç»„æˆå‘˜ä¸åº”éœ€è¦é˜…è¯»
æœ¬æ–‡æ¡£, ç³»ç»Ÿå®ç°çš„åº”å½“æ˜¯ååˆ†å‹å¥½ (å‚»ç“œå¼) çš„äº¤äº’ğŸ˜

### å‘èµ·æ—¶é—´

2019-02-01

### è§„åˆ’

#### TODO

- ä¼ æ„Ÿå™¨è°ƒè¯•, å®‰å…¨å›è·¯çŠ¶æ€ç•Œé¢
  - æ²¹é—¨æ·±åº¦ (å•è‰²ç›´æŸ±)
  - åˆ¹è½¦æ·±åº¦ (å•è‰²ç›´æŸ±)
  - å®‰å…¨ç”µè·¯çŠ¶æ€å›¾ä¸flagæ•°å€¼çš„å¯¹åº”
- è½¦æ‰‹ç•Œé¢ç”µæ§æŠ¥è­¦ä¿¡æ¯æç¤º alert (å¯è€ƒè™‘é€šè¿‡æµè§ˆå™¨çº§åˆ·æ–°é¡µé¢æ¥æ¶ˆé™¤alert)
- ç”µæ± ç®±æ¸©åº¦çƒ­åŠ›å›¾
- GåŠ é€Ÿåº¦åœ†

#### FIXME

- æ•°æ®ä¼ è¾“å»¶è¿Ÿ. å¯èƒ½æ˜¯å°†æ˜¯ä»CANé‡Œè¯»å–æ•°æ®æ›´æ–°åˆ°stateä¸­å› ä¸ºåˆ·æ–°ç‡ä¸åŒæœ‰å»¶è¿Ÿ, å¯èƒ½æ˜¯å°†stateé‡Œæ•°æ®ä¼ è¾“åˆ°åç«¯çš„socketçš„ç¼“å†²åŒºè®¾ç½®ä¸åˆç†æœ‰å»¶è¿Ÿ, å¦å¤–å‰ç«¯é¡µé¢åˆ·æ–°æ•°æ®æœ‰å‡ åæ¯«ç§’çš„å»¶è¿Ÿ. ä¹Ÿå¯èƒ½æ˜¯å…¶ä»–åŸå› .
- å¼€æœºåPlymouthç»“æŸåˆ°å¼€å§‹åŠ è½½æ¡Œé¢ä¸çŸ¥ä¸ºä½•æœ‰å¤§çº¦8sçš„é»‘å±. å°½é‡ç¼©çŸ­ç•Œé¢åŠ è½½æ—¶é—´.

#### Milestone

- ä¸ºæ¯ä¸ªè½¦æ‰‹å»ºç«‹è´¦å·åˆ†åˆ«è®°å½•æ•°æ®
- å°†æ¯æ¬¡è·‘åŠ¨çš„æ—¶é—´, é€Ÿç‡, æ–¹å‘, æ²¹é—¨, åˆ¹è½¦, ç”µé‡ç­‰å…³è”èµ·æ¥, è¾¾åˆ°è¿˜åŸæ•´æ¬¡è·‘åŠ¨çš„æ•ˆæœ, æ–¹ä¾¿å®æ—¶/åæœŸçš„åˆ†æ
- è¯­éŸ³æç¤º, è“ç‰™è¿æ¥è½¦æ‰‹è€³éº¦

### ç³»ç»Ÿç›®æ ‡

å‘½åä¸ºfuryTerminalæ˜¯å› ä¸ºæœ¬ç³»ç»Ÿçš„ç›®æ ‡æ˜¯åšå‡ºä¸€ä¸ª **å‹å¥½, ç›´è§‚, å¥å£®** çš„èµ›è½¦
ç»ˆç«¯:

- è®©æ“ä½œæ–¹å¼è¶³å¤Ÿå‹å¥½, è½¦é˜Ÿé˜Ÿå‘˜ä»¬èƒ½é€šè¿‡ç®€å•æ“ä½œæ¥è·å–æ•°æ®æˆ–è€…æ›´æ”¹å‚æ•°
- æ•°æ®å‘ˆç°æ–¹å¼, äº¤äº’æ–¹å¼è¶³å¤Ÿç›´è§‚, é€Ÿåº¦, æ²¹é—¨, æ—¶é—´ç­‰è½¦æ‰‹å¸¸ç”¨æ•°æ®æ˜æ˜¾, æ•…éšœåŸå› æç¤ºå†…å®¹è¶³å¤Ÿç›´è§‚, åˆ†æç”¨æ•°æ®ä»¥å›¾è¡¨å½¢å¼å‘ˆç°
- ç³»ç»Ÿè¶³å¤Ÿå¥å£®, èƒ½å¤Ÿåº”å¯¹ç»å¤§å¤šæ•°æ•…éšœæƒ…å†µ, æ¯”å¦‚æ‰ç”µæ•°æ®å‚¨å­˜ç­‰.

è‡³äºä»€ä¹ˆæ˜¯ç»ˆç«¯ (Terminal), å‚è§ ğŸ”— [è¿™é‡Œ](https://www.zhihu.com/question/21711307/answer/118788917)

![ç³»ç»Ÿè“å›¾](doc/æ‹“æ‰‘å›¾.svg)

### ç³»ç»Ÿç¯å¢ƒ

`python` version: Python 3.7.3 (default, Apr  3 2019, 05:39:12) [GCC 8.2.0] on linux

ğŸ’¡ å½“å‰ç³»ç»Ÿé»˜è®¤pythonä¸º 3.7.3, è‹¥æƒ³å°†ç³»ç»Ÿé»˜è®¤pythonåˆ‡æ¢å›python2, è¿è¡Œä»¥ä¸‹å‘½ä»¤ç„¶åè·ŸéšæŒ‡å¯¼æ“ä½œ.

```shell
sudo update-alternatives --config python
```

âš ï¸éœ€æ³¨æ„pipçš„ç‰ˆæœ¬ä¸pythonç‰ˆæœ¬ç›¸åŒ¹é…, é€šè¿‡è¿è¡Œ `pip -V` æ¥æŸ¥çœ‹pipç‰ˆæœ¬å’Œä½ç½®

`django` version: 2.2.7

## CANè½¬SPIæ¨¡å—

ğŸ“‘ [RS485 CAN HATç”¨æˆ·æ‰‹å†Œ](doc/CAN2SPI/CAN_to_SPI_module/RS485-CAN-HAT-user-manual-cn.pdf)

ğŸ“‘ [RS485 CAN HATç”µè·¯å›¾](doc/CAN2SPI/CAN_to_SPI_module/RS485_CAN_HAT_Schematic.pdf)

ğŸ”— [python-canæ–‡æ¡£](https://python-can.readthedocs.io/en/master/index.html#)

## DSIæ¥å£çš„7å¯¸è§¦æ‘¸æ˜¾ç¤ºå±

ğŸ“‘ [7å¯¸è§¦æ‘¸å±è¯´æ˜ä¹¦](doc/display/7å¯¸è§¦æ‘¸å±è¯´æ˜ä¹¦.md)

## æµ‹è¯•

ä½äº`/test`æ–‡ä»¶å¤¹ä¸‹çš„ä¸ºå„éƒ¨åˆ†æµ‹è¯•ç¨‹åº


## æ ‘è“æ´¾é…ç½®

### ç½‘ç»œé…ç½®

TODO

## è½¦è½½ç½‘ç«™ (äº¤äº’å¹³å°)

ä¹‹æ‰€ä»¥é€‰æ‹©åšç½‘ç«™æ˜¯å› ä¸ºç½‘ç«™æ˜¯æœ€å®¹æ˜“å®ç°çš„GUI, ä¹Ÿèƒ½å¾ˆè½»æ¾åœ°æ¥å…¥å¤§é‡åº“, è½»æ¾å®ç°è¿œç¨‹è®¿é—®ç­‰åŠŸèƒ½.

åªè¦å¼€æœºè‡ªå¯æµè§ˆå™¨å…¨å±æ¨¡å¼, ç”¨ä»£ç é¿å…è¯¯è§¦éœ²å‡ºç«¯å€ª, æ ¹æœ¬çœ‹ä¸å‡ºæ˜¯ç½‘é¡µ!ğŸ‰

é˜²æ­¢è¯¯è§¦éœ²å‡ºç«¯å€ªå…·ä½“æ¥è¯´æŒ‡**éšè—é¼ æ ‡å›¾æ ‡**, **ç¦ç”¨å³é”®èœå•**, **ç¦æ­¢é€‰ä¸­**ç­‰

ğŸ”— [é˜²æ­¢è¯¯è§¦ç›¸å…³ä»£ç ](https://blog.csdn.net/jx950915/article/details/80346530)

æœ¬ç½‘ç«™åŸºäº **Django** æ¡†æ¶å’ŒMySQLæ•°æ®åº“.

### æ–‡ä»¶æ ‘

.  
â”œâ”€â”€ config ç”¨äºå¿«é€Ÿéƒ¨ç½²ç¯å¢ƒçš„é…ç½®æ–‡ä»¶.  
â”œâ”€â”€ doc é¡¹ç›®ç›¸å…³çš„æ–‡æ¡£  
â”œâ”€â”€ furyCAN CANæ€»çº¿æ•°æ®è¯»å–æ¨¡å—  
â”œâ”€â”€ furyTerminal djangoç½‘ç«™åŸºç¡€ç›®å½•  
â”œâ”€â”€ log ç½‘ç«™è¿è¡Œæ—¥å¿—  
â”œâ”€â”€ oncar ç½‘ç«™**oncar**æ®µåç«¯  
â”œâ”€â”€ scripts å‡ ä¸ªç›¸å…³è„šæœ¬  
â”œâ”€â”€ static ç½‘ç«™ç”¨åˆ°çš„é™æ€æ–‡ä»¶  
â”œâ”€â”€ templates ç½‘ç«™é™æ€é¡µé¢æ¨¡æ¿  
â””â”€â”€ test å‡ ä¸ªæµ‹è¯•ç”¨è„šæœ¬  

### ç«™ç‚¹åœ°å›¾

- `/` (Home Page)
  - `/oncar`
    - `/` (è½¦æ‰‹é¡µé¢)
    - `/devices` (èµ›å‰è®¾å¤‡çŠ¶æ€æ£€æŸ¥é¡µ)
    - `/refresh`Â (ä¸æ˜¯è®¿é—®é¡µé¢, æ˜¯ç»™è½¦æ‰‹é¡µé¢åˆ·æ–°æ•°æ®çš„)
  - `/remote`

### æ•°æ®æµæ–¹æ¡ˆ

ç›®å‰é¡¹ç›®çš„éš¾ç‚¹åœ¨äºå¦‚ä½•**å®æ—¶**ä»CANæ€»çº¿ä¼ è¾“æ•°æ®åˆ°å‰ç«¯, ä¹Ÿå°±æ˜¯æ•°æ®æµçš„æ–¹æ¡ˆ.

ğŸ’¡ ç›®å‰é¡¹ç›®æœ‰4ä¸ªåˆ†æ”¯: `master`, `sqlite_ver`, `mysql_ver`, `databaseless`. å…¶ä¸­`master`åˆ†æ”¯æš‚æ—¶åœç•™åœ¨æŸä¸€ç‰ˆæœ¬çš„`mysql_ver`æäº¤, å¾…ç¡®å®šæ•°æ®ä¼ è¾“æ–¹æ¡ˆå†åˆå¹¶åˆ°`master`.

ğŸ‘‡æ•°æ®æµæ–¹æ¡ˆç¤ºæ„å›¾

![](doc/æ•°æ®æµæ–¹æ¡ˆç¤ºæ„å›¾.svg)

å…¶ä¸­å½©è‰²çº¿éƒ¨åˆ†æ˜¯å¯èƒ½äº§ç”Ÿå»¶è¿Ÿçš„åœ°æ–¹. çº¢è‰²éƒ¨åˆ†ç»å®éªŒ**ç›®å‰çš„æ•°æ®è§„æ¨¡ä¸‹**å‡ ä¹æ— å»¶è¿Ÿ. ç»¿è‰²å’Œé»„è‰²éƒ¨åˆ†å› ä¸ºæ˜¯ä»¥**ä¸€å®šé¢‘ç‡**å‘ç”Ÿ, æ€€ç–‘å› ä¸º**ç¼“å†²åŒºå¤§å°**è®¾ç½®ä¸åˆç†å› æ­¤å­˜åœ¨å»¶è¿Ÿ. è“è‰²éƒ¨åˆ†ç»è¯•éªŒä¼šäº§ç”Ÿå¤§è‡´30mså»¶è¿Ÿ (å¯èƒ½æ˜¯djangoæ¶æ„æ‹–äº†åè…¿).

- `sqlite_ver`æ˜¯ä»¥sqliteä½œä¸ºæ•°æ®åº“, å‚¨å­˜æ•°æ®çš„ç‰ˆæœ¬. åŸæœ¬åˆ©ç”¨SQLite3æ•°æ®åº“ä¼ è¾“æ•°æ®,  é—®é¢˜åœ¨äºsqliteæ˜¯ä¸ªè½»é‡çº§æ•°æ®åº“, **æ— æ³•æ”¯æŒé«˜å¹¶å‘**, å½“æœ‰å¤šäºä¸€ä¸ªç»ˆç«¯è®¿é—®ç½‘ç«™æ—¶å‘æ•°æ®åº“å†™å…¥æ–°æ•°æ®çš„ç¨‹åºä¼šé­é‡è¿›ç¨‹é”è€Œç»“æŸ. è¿™ä¸ªé—®é¢˜ä»¥æ•°æ®åº“**åªç”¨æ¥å‚¨å­˜æ•°æ®, ä¸è¢«å‰ç«¯å®æ—¶è®¿é—®**è€Œè§£å†³. åœ¨è¿™ä¸ªç‰ˆæœ¬ä¸­**åç«¯ç›´æ¥è°ƒç”¨furyCANæ¨¡å—**è·å–æ•°æ®.
- `mysql_ver`æ˜¯åœ¨é‡åˆ°ä¸Šè¿°é—®é¢˜åå°è¯•çš„è§£å†³æ–¹å¼ä¹‹ä¸€, **ä»¥MySQLæ•°æ®åº“è®°å½•, ä¼ è¾“æ•°æ®**. MySQLçš„å¼ºå¤§æ€§èƒ½ä½¿å¾—é«˜å¹¶å‘å¯¼è‡´ç¨‹åºç»ˆæ­¢é—®é¢˜ä¸å¤å­˜åœ¨, ä½†MySQLçš„äº‹åŠ¡éš”ç¦»ç­‰çº§çš„é€‰æ‹©å€¼å¾—å†ç ”ç©¶ä¸€ä¸‹. è¿™å¯èƒ½æ˜¯æœ€åä¼šä½¿ç”¨çš„æ–¹æ¡ˆ.
- `databaseless`æ˜¯**ä¸æ–­ä»CANæ€»çº¿è¯»å–æ•°æ®å¹¶é€šè¿‡socketä¸åç«¯é€šä¿¡**çš„è§£å†³æ–¹æ¡ˆ. â—ï¸å®é™…ä¸Šæˆ‘æ²¡èƒ½ç†æ¸…è¿™æ ·çš„æ–¹å¼ä¼ é€’åˆ°å‰ç«¯çš„æ•°æ®æµæ˜¯å¦è¿˜æ˜¯æŒ‰ç…§æ­£ç¡®çš„æ—¶é—´å…ˆåé¡ºåºæ’åˆ—çš„. æˆ‘æƒ³è¿™ç§æ–¹æ¡ˆåº”å½“è¢«æ”¾å¼ƒ, å› ä¸ºå®ƒä¼¼ä¹å¹¶æ²¡æœ‰ä»€ä¹ˆå¥½å¤„. ğŸ’¡ åç»­å·¥ä½œå¯ä»¥æ˜¯ç”¨ROSçš„é€šä¿¡ç³»ç»Ÿä»£æ›¿æ‰‹æ“socket, æ•°æ®æµä¼šå¥å£®è®¸å¤š.

ğŸš© æ€»è€Œè¨€ä¹‹, ä¸ºäº†å‚¨å­˜æ•°æ®ä¸€ä¸ªæ•°æ®åº“æ˜¯å¿…è¦çš„. (å­˜å…¥ç®€å•çš„æ–‡ä»¶æ¯”å¦‚csvæ–‡ä»¶å¹¶ä¸ä¼šæ˜¯ä¸€ä¸ªå¥½é€‰æ‹©, ä»¥æ•°æ®åº“çš„å½¢å¼æ›´ä¾¿äºç®¡ç†æ•°æ®, ä¸djangoåä½œæ›´æ–¹ä¾¿) ä½†ä½¿ç”¨æ•°æ®åº“çš„æ–¹å¼éœ€è¦è¿›ä¸€æ­¥æ¢ç´¢: æ˜¯å•çº¯å‚¨å­˜å®æ—¶æ€§æ²¡é‚£ä¹ˆå¼ºçš„æ•°æ®ä»¥ä¾›å¹³æ—¶åˆ†æ? è¿˜æ˜¯è¿‘ä¹å®æ—¶è®°å½•æ•°æ® (ç»æµ‹è¯•å³ä¾¿æ•°æ®è®°å½•é¢‘ç‡å¾ˆé«˜æ•°æ®åº“ä½“ç§¯ç›¸å¯¹äºSDå¡ç©ºé—´ä¹Ÿå¾ˆå°), åˆ©ç”¨æ•°æ®åº“åœ¨Pythonæ–‡ä»¶é—´ä¼ é€’æ•°æ®?

âš ï¸ æœ€å¤´ç–¼çš„æ˜¯å»¶è¿Ÿåˆ°åº•æ˜¯ä½•å¤„äº§ç”Ÿçš„å‘€ğŸ˜­ ç›®å‰çš„å»¶è¿Ÿå¤§è‡´æ˜¯3s (æˆ‘å·²ç»å°½åŠ›äº†)

### å¦‚æ­¤é€‰æ‹©çš„ä¼˜ç¼ºç‚¹

#### Django

##### ä¼˜ç‚¹

- æ˜¯ä¸€ä¸ªpythonæ¡†æ¶, æ•°æ®å¤„ç†å¾ˆæ–¹ä¾¿, å®¹æ˜“æ¥å…¥ROS
- å®¹æ˜“ä¸Šæ‰‹. ä¸ªäººè®¤ä¸ºç»“åˆäº†å‰åç«¯, æ›´åå‘åç«¯, ä½†å‰ç«¯èƒ½å¾ˆå®¹æ˜“çš„ç»“åˆå‰ç«¯

##### ç¼ºç‚¹

é€Ÿåº¦ä¸ç®—å¿«

#### SQLite3

##### ä¼˜ç‚¹

- SQLite3æ˜¯ä¸€ä¸ªè½»é‡çº§æ•°æ®åº“, æ˜¯Djangoé»˜è®¤ä½¿ç”¨çš„æ•°æ®åº“, ä¸éœ€è¦ä»€ä¹ˆé¢å¤–æ“ä½œç«Ÿå¯ä»¥è½»æ¾éƒ¨ç½²ä¸€ä¸ªSQLite3æ•°æ®åº“, å¾ˆæ–¹ä¾¿ç§»æ¤.
- å¯¹SQLite3æ•°æ®åº“æ“ä½œä¹Ÿå¾ˆç®€å•, å‡ ä¹å…¨éƒ¨æ“ä½œéƒ½å¯ä»¥ç”¨djangoæä¾›çš„apiå‘½ä»¤å®Œæˆ. å­¦ä¹ èµ·æ¥ä¹Ÿç›¸å¯¹ç®€å•, å› ä¸ºæœ¬èº«å°±æ²¡é‚£ä¹ˆå¤šé«˜çº§åŠŸèƒ½.
- SQLite3æ•°æ®åº“å°±æ˜¯ä¸€ä¸ªåœ¨æŒ‡å®šç›®å½•çš„`.sqlite3`ç»“å°¾çš„æ–‡ä»¶, å¾ˆæ–¹ä¾¿ç®¡ç†

##### ç¼ºç‚¹

- å®ƒçš„ç¼ºç‚¹åŒæ ·å¾ˆæ˜æ˜¾, è½»é‡çº§ä½¿SQLite3ä¸æ”¯æŒé«˜å¹¶å‘, å¦‚æœé«˜å¹¶å‘å°±ä¼šäº§ç”Ÿè¿›ç¨‹é”.

#### MySQL

ä¸€å¼€å§‹ä½¿ç”¨çš„æ˜¯SQLite, ä½†æ˜¯[SQLiteä¸æ”¯æŒé«˜å¹¶å‘è®¿é—®](https://blog.csdn.net/u013690521/article/details/38776709),
å› æ­¤æ”¹ç”¨MySQL.

##### ä¼˜ç‚¹

æ”¯æŒé«˜å¹¶å‘, æœ‰æ›´ä¸°å¯Œçš„åŠŸèƒ½

##### ç¼ºç‚¹

- éƒ¨ç½²èµ·æ¥è¦éº»çƒ¦ä¸€äº›, éœ€è¦å•ç‹¬åˆ›å»ºè¿™ä¸ªæ•°æ®åº“
- æ“ä½œå¤æ‚ä¸€ç‚¹. å¯è®¾ç½®å‚æ•°æ›´å¤šå®é™…ä¸Šå¯¹ä¸äº†è§£çš„äººæ¥è¯´å¾ˆä¸å‹å¥½, ä¼šè®©äººè¿·èŒ«è¯¥é€‰å“ªä¸ª.

##### MySQLå‘½ä»¤ç®€è®°

ğŸ’¡ rootç”¨æˆ·åˆå§‹å¯†ç ä¸ºç©º, åªèƒ½`su`åˆ°rootç”¨æˆ·è¿›å…¥mysql

å‘½ä»¤è¡Œè¿›å…¥mysql `mysql -u fury -p`

æ–°å»ºæ•°æ®åº“ `create database furyTerminal character set utf8;`  
åˆ é™¤æ•°æ®åº“ `drop database furyTerminal;`  
æŸ¥çœ‹æ•°æ®åº“ä¸­çš„æ•°æ®è¡¨ `use furyTerminal; show tables;`  
æ–°å»ºç”¨æˆ· `create user fury identified by 'fury';`  
ç»™äºˆç”¨æˆ·æƒé™ `grant all privileges on furyTerminal.* to fury;`  
æŸ¥çœ‹ç”¨æˆ·æƒé™ `show grants for fury;`  
æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ· `select user, host from mysql.user;`

ğŸ‘‡ä¸€äº›æ¨èçš„å­¦ä¹ èµ„æ–™

ğŸ”— [HTMLæ•™ç¨‹](https://www.w3schools.com/html/default.asp)  
ğŸ”— [CSSæ•™ç¨‹](https://www.w3schools.com/css/default.asp)  
ğŸ”— [Bootstrapæ•™ç¨‹](https://www.w3schools.com/bootstrap4/default.asp)  
ğŸ”— [Bootstrapå®˜æ–¹æ–‡æ¡£](https://getbootstrap.com/docs/4.3/getting-started/introduction/)  
ğŸ”— [JavaScriptæ•™ç¨‹](https://www.w3schools.com/js/default.asp)  
ğŸ”— [Djangoå®˜æ–¹æ–‡æ¡£ä¸­æ–‡ç‰ˆ](https://docs.djangoproject.com/zh-hans/2.1/) (ç¿»è¯‘ä¸å…¨)  
ğŸ”— [Django**2.2**æ–‡æ¡£ä¸ªäººä¸­æ–‡ç¿»è¯‘](http://www.liujiangblog.com/course/django/2)  
ğŸ”— [Django MySQLæ•°æ®åº“æ–‡æ¡£](https://docs.djangoproject.com/en/2.2/ref/databases/#time-zone-definitions)

### ç®¡ç†

ç®¡ç†å‘˜è´¦å·: leo

å¯†ç : leo

ğŸ’¡ æ·»åŠ ç®¡ç†å‘˜ `python manage.py createsuperuser`

ğŸ’¡ å¯¹äºSQLite3æ•°æ®åº“æ¥è¯´, å¦‚æœæŠŠæ•°æ®åº“æ–‡ä»¶ (`sqlite3`ç»“å°¾çš„æ–‡ä»¶) åˆ æ‰äº†çš„è¯åŸæœ¬çš„ç®¡ç†å‘˜ä¿¡æ¯åŒæ—¶ä¹Ÿè¢«åˆ æ‰äº†.

### oncar

#### oncarè®¾è®¡

ğŸ“ [oncaré¢æ¿è®¾è®¡è‰ç¨¿](doc/furyTerminal/oncar/é¢æ¿è®¾è®¡è‰ç¨¿.md)

### djangoçºªè¦

#### è®¾ç½®å…è®¸è®¿é—®çš„åœ°å€

åœ¨ `furyTerminal/furyTerminal/settings.py` ä¸­ **ALLOWED_HOSTS**ä¸€é¡¹è®¾ç½®äº†å…è®¸è®¿é—®
ç½‘ç«™çš„åœ°å€, è®¾ä¸º `'*'` åˆ™æ˜¯å…è®¸æ‰€æœ‰åœ°å€è®¿é—®.

#### è®¾ç½®åå°æ—¶é—´æ˜¾ç¤ºæ ¼å¼

ğŸ”— [å¯ç”¨çš„æ ¼å¼åŒ–å­—ç¬¦](https://docs.djangoproject.com/en/2.0/ref/templates/builtins/#date)
ğŸ”— å…·ä½“å‚è€ƒ[è¿™é‡Œ](https://blog.51cto.com/xujpxm/2090382)

#### è®¾ç½®å­—æ®µä¸å¯ä¿®æ”¹

åœ¨å¯¹åº”çš„çˆ¶ç±»ä¸º **admin.ModelAdmin** çš„ç±»ä¸‹é‡å†™ `get_readonly_fields`æ–¹æ³•å¦‚ä¸‹:

```python
def get_readonly_fields(self, request, obj=None):
    if obj:  # obj is not None, so this is an edit
        return ['[readonly_fields]']  # Return a list or tuple of readonly fields' names
    else:  # This is an addition
        return []
```

#### æ¨¡æ¿

ğŸ”— å‚è€ƒé“¾æ¥:
- [æ¨¡æ¿çš„å¯¼å…¥å’Œç»§æ‰¿, é™æ€æ–‡ä»¶çš„ä½¿ç”¨](https://blog.csdn.net/qq_33961117/article/details/83993039)
- [Django2.2æ–‡æ¡£ç¿»è¯‘-æ¨¡æ¿å±‚](http://www.liujiangblog.com/course/django/145)

ğŸ”— [å‚è€ƒ](https://stackoverflow.com/questions/7860612/django-admin-make-field-editable-in-add-but-not-edit)

#### å¸¸ç”¨å‘½ä»¤

ğŸ’¡ å› ä¸ºæˆ‘è®°æ€§å¾ˆå·®, å°†å¸¸ç”¨å‘½ä»¤é›†æˆåˆ°äº†æ ¹ç›®å½•ä¸‹çš„pythonè„šæœ¬`fury`

##### è¿è¡Œç½‘ç«™

âš ï¸ åœ¨ç½‘ç«™æ ¹ç›®å½•æ‰§è¡Œ.
ğŸ’¡æ­¤æ—¶ä¸ºç½‘ç«™åœ¨ **localhost:8000** è¿è¡Œ

```shell
python furyTerminal/manage.py runserver 0:8000
```

##### ç”Ÿæˆåº”ç”¨çš„è¿ç§»

```shell
python manage.py makemigrations
```

##### åº”ç”¨è¿ç§»åˆ°ç½‘ç«™

âš ï¸ åœ¨ç½‘ç«™æ ¹ç›®å½•æ‰§è¡Œ.

```shell
python manage.py migrate
```

##### database API

###### è¿›å…¥ä¸“ç”¨pythonè§£é‡Šå™¨

> æˆ‘ä»¬ä½¿ç”¨è¿™ä¸ªå‘½ä»¤è€Œä¸æ˜¯ç®€å•çš„ä½¿ç”¨ "Python" æ˜¯å› ä¸º **manage.py** ä¼šè®¾ç½®
> **DJANGO_SETTINGS_MODULE** ç¯å¢ƒå˜é‡ï¼Œè¿™ä¸ªå˜é‡ä¼šè®© Django æ ¹æ® **mysite/settings.py**
> æ–‡ä»¶æ¥è®¾ç½® Python åŒ…çš„å¯¼å…¥è·¯å¾„ã€‚

```shell
python manage.py shell
```

ğŸ’¡å¦‚æœæƒ³é€šè¿‡è„šæœ¬è°ƒç”¨ database API, éœ€è¦åœ¨è„šæœ¬å¼€å¤´åŠ ä¸Šä»¥ä¸‹è¯­å¥:

```python
from furyTerminal import settings
os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'furyTerminal.settings')
django.setup()
```

å…·ä½“ä¾‹å­å‚è§[oncaråº”ç”¨çš„Speedéƒ¨åˆ†çš„æµ‹è¯•](test/oncar/speed-gauge/create.py)

###### æ·»åŠ è®°å½•

ä¸¾ä¾‹: å‘ **oncar** åº”ç”¨çš„ **Speed** æ¨¡å‹æ·»åŠ è®°å½•

1.é¦–å…ˆå½“ç„¶æ˜¯å¼•ç”¨å®ƒ

```python
from oncar.models import Speed
```

2.æœ‰ä¸¤ç§æ·»åŠ æ–¹æ³•:

   1. å…ˆå®ä¾‹åŒ–ç„¶åä¿å­˜ ğŸ”—[save()](https://docs.djangoproject.com/zh-hans/2.1/topics/db/queries/)

      ```python
      speeed = Speed(speed_value='123')
      speeed.save()
      ```

   2. ç›´æ¥åˆ›å»º ğŸ”—[creat()](https://docs.djangoproject.com/zh-hans/2.1/ref/models/querysets/#django.db.models.query.QuerySet.create)

      ```python
      Speed.objects.create(speed_value='123')
      ```

#### æ³¨æ„äº‹é¡¹

- path()å‡½æ•°çš„å‚æ•°`route`ä¸ä¼šåŒ¹é… GET å’Œ POST å‚æ•°æˆ–åŸŸåã€‚ä¾‹å¦‚ï¼ŒURLconf åœ¨å¤„ç†è¯·æ±‚
  https://www.example.com/myapp/ æ—¶ï¼Œå®ƒä¼šå°è¯•åŒ¹é… myapp/ ã€‚å¤„ç†è¯·æ±‚
  https://www.example.com/myapp/?page=3 æ—¶ï¼Œä¹Ÿåªä¼šå°è¯•åŒ¹é… myapp/ã€‚
- ğŸ”—[djangoæ¨¡å‹ä¸­auto_nowå’Œauto_now_addçš„åŒºåˆ«](https://www.cnblogs.com/vincenshen/articles/7659763.html)

### é¡µé¢è®¾è®¡çºªè¦

#### ä»ªè¡¨ç›˜

æœ€å¼€å§‹è‡ªå·±æ‰‹æ“çš„ä»ªè¡¨ç›˜æ˜¾å¾—æœ‰äº›å¡é¡¿, èƒ½è¾¾åˆ°0.5ç§’çº§åˆ·æ–°, å†å¿«å¾ˆå®¹æ˜“è®©chromeå´©æºƒ. è¿™ä¸ªåˆ·æ–°ç‡å¬èµ·æ¥ä¸ä½, 0.5sçš„å»¶è¿Ÿåœ¨æ±½è½¦ä¸Šä¸ç®—é«˜, ä½†å‘ˆç°å‡ºæ¥çš„**å˜åŒ–è¿‡ç¨‹ä¸å¤Ÿå¹³æ»‘**, ç»™äººä¸€ç§å¡é¡¿æ„Ÿ.

ğŸ”— [è¿™ä¸ª](https://www.codewall.co.uk/creating-gauge-charts-with-the-justgage-javascript-library/)æ˜¯ä¸€ä¸ªæœ€ç®€é™‹çš„æœ‰å¹³æ»‘ç§»åŠ¨çš„ä»ªè¡¨ç›˜çš„æ•™ç¨‹

ğŸ”— [è¿™ä¸ª](https://www.pubnub.com/blog/streaming-sensor-readings-realtime-gauge-chart/)æ˜¯ä¸€ä¸ªç”¨æ ‘è“æ´¾è¯»å–ä¼ æ„Ÿå™¨å‚æ•°å¹¶æ˜¾ç¤ºåœ¨ç½‘é¡µä»ªè¡¨ç›˜çš„å®ä¾‹

ğŸ”— [è¿™ä¸ª](https://developers.google.com/chart/interactive/docs/gallery/gauge)æ˜¯Google Chartsçš„**æœ´ç´ æ´¾**ä»ªè¡¨ (æ•ˆæœå¦‚ä¸‹å›¾)

![1570749713523](doc/google_gauge.png)

ğŸ”— [è¿™ä¸ª](https://www.cssscript.com/canvas-based-html5-gauge-library-gauge-js/)æ˜¯ç›®å‰æ‰¾åˆ°æœ€ç¬¦åˆèµ›è½¦æ ·å¼çš„ä»ªè¡¨ (å¥½å§æ¢å¸ˆå‚…è¯´æ²¡æœ‰ç§‘æŠ€æ„Ÿ), ç”±**canvas**ç»˜åˆ¶. åˆ·æ–°å€¼ä»£ç :

```js
document.gauges[0].value = current_speed;
```

![](doc/old-fashion-gauge.gif)

![](doc/black-red-old-fashion-gauge.jpg)

ğŸ”— [è¿™ä¸ª](https://www.cssscript.com/animated-svg-gauge/)æ˜¯ç§‘æŠ€ç®€çº¦é£çš„, ç”±**svg**ç»˜åˆ¶, åˆ·æ–°å€¼ä»£ç :

```js
speedGauge.setValue(10)
```

![](doc/svg-modern-gauge.gif)